/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id "java"
    id "monticore" version "$mc_version"
}

dependencies {
    implementation "scolar:language-family-tool:$scolar_core_version"
    implementation "scolar:language-component-tool:$scolar_core_version"
    implementation "scolar:customization-interface-tool:$scolar_core_version"
    implementation "scolar:mc-language-component-tool:$scolar_core_version"
    implementation "scolar:mc-scolar-instance:$scolar_core_version"
}

group = "mc-scolar"
version = '1.0.1-SNAPSHOT'
description = 'scolar-tutorial'
sourceCompatibility = "11"

buildDir = file("$projectDir/target")

allprojects {
    ext.grammarDir = 'src/main/grammars'
    buildDir = file("$projectDir/target")

    repositories {
        mavenLocal()
        maven {
            url repo
        }
        gradlePluginPortal()
    }
}

task cleanSCOLAR {
    ext.message = 'cleanSCOLAR'
    dependsOn ":automata-lang:clean"
    dependsOn ":automaton-family:clean"
    dependsOn ":char-expr-lang:clean"
    dependsOn ":timed-expr-lang:clean"
    dependsOn ":twitter-action-lang:clean"
    dependsOn ":usage:clean"
}

defaultTasks 'build'

repositories {
    mavenLocal()
    maven {
        url repo
    }
    gradlePluginPortal()
    mavenCentral()
}

// build sources jar with handwritten + generated sources
task sourcesJar(type: Jar) {
    ext.message = 'sourcesJar'
    archiveClassifier = 'sources'
    from(sourceSets.main.allJava)
}

sourcesJar.dependsOn project.collect { it.tasks.withType(MCTask) }

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}